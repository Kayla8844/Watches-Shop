(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f00bc"],{"9b63":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container customer_checkout"},[s("div",{staticClass:"mt-3"},[s("button",{staticClass:"btn btn_backto_pd",on:{click:t.backtoHome}},[t._v("<  回到產品列表")])]),t._m(0),s("div",{staticClass:"check_ct_all container mt-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"cart_list_all col-lg-5 order-lg-2"},[s("div",{staticClass:"cart_head_all"},[s("div",{staticClass:"cart_head d-flex justify-content-between align-items-center mb-1"},[s("h5",{staticClass:"cart_title"},[t._v("購物清單")]),t.cart.carts?s("div",{staticClass:"cart_length"},[s("p",{staticClass:"cart_length_txt"},[t._v(t._s(t.cart.carts.length))])]):t._e()])]),t.cart.carts?s("table",{staticClass:"table"},[s("tbody",[t._l(t.cart.carts,(function(e){return s("tr",{key:e.id,staticClass:"total_row"},[s("td",{staticClass:"align-middle text-left"},[s("button",{staticClass:"trash_btn",on:{click:function(s){return s.preventDefault(),t.removeCart(e.id)}}},[s("i",{staticClass:"fas fa-trash-alt"})]),s("img",{staticClass:"pd_img pd_img_mob mt-2",attrs:{src:e.product.imageUrl,alt:""}})]),s("td",{staticClass:"align-middle"},[s("img",{staticClass:"pd_img pd_img_lg",attrs:{src:e.product.imageUrl,alt:""}})]),s("td",{staticClass:"align-middle text-left"},[e.coupon?s("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e(),t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.product.title)+"\n\t\t\t\t\t\t\t\t")]),s("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),s("td",{staticClass:"align-middle text-right"},[s("span",[t._v(t._s(t._f("currency")(e.total)))]),s("br"),e.final_total!=e.total?s("span",{staticClass:"text-success"},[t._v(t._s(t._f("currency")(e.final_total)))]):t._e()])])})),s("tr",{staticClass:"total_row"},[s("td",{staticClass:"total text-right",attrs:{colspan:"5"}},[s("p",{staticClass:"total_txt"},[t._v("總計 "+t._s(t._f("currency")(t.cart.total)))])])]),t.cart.total!=t.cart.final_total?s("tr",{staticClass:"total_row"},[s("td",{staticClass:"total text-right",attrs:{colspan:"5"}},[s("p",{staticClass:"text-success"},[t._v("折扣後 "+t._s(t._f("currency")(t.cart.final_total)))])])]):t._e()],2)]):t._e(),s("div",{staticClass:"coupon_all"},[s("h6",{staticClass:"text-success"},[t._v('輸入優惠碼 "0080"，可享8折優惠')]),s("div",{staticClass:"coupon_input_all mb-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"coupon_input",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addCouponCode(e)},input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),s("button",{staticClass:"btn_add_coupon",attrs:{type:"button"},on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addCouponCode(e)}}},[t._v("套用優惠碼")])])])]),s("div",{staticClass:"user_form text-left col-lg-7"},[s("h5",{staticClass:"mb-3"},[t._v("訂單資訊")]),s("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useremail"}},[t._v("Email")]),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?s("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?s("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("tel")},attrs:{type:"tel",id:"usertel",name:"tel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("tel")?s("span",{staticClass:"text-danger"},[t._v("電話必須輸入")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("address")},attrs:{type:"address",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?s("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useraddress"}},[t._v("留言")]),s("br"),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._m(1)])])])])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"row justify-content-center mt-4"},[s("div",{staticClass:"step_all col-md-8"},[s("div",{staticClass:"step_list text-center active"},[s("div",{staticClass:"step"},[s("div",{staticClass:"step_txt active"},[t._v("1")])]),s("p",{staticClass:"step_ct"},[t._v("輸入資料")]),s("div",{staticClass:"bg_line_all"})]),s("div",{staticClass:"step_list text-center"},[s("div",{staticClass:"step"},[s("div",{staticClass:"step_txt step_txt2"},[t._v("2")])]),s("p",{staticClass:"step_ct"},[t._v("金流付款")])]),s("div",{staticClass:"step_list text-center"},[s("div",{staticClass:"step"},[s("div",{staticClass:"step_txt step_txt3"},[t._v("3")])]),s("p",{staticClass:"step_ct"},[t._v("完成")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-danger btn_form_output"},[t._v("送出訂單")])])}],i=(s("1157"),{data:function(){return{coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{cart:function(){return this.$store.state.cart},hasCoupon:function(){return this.$store.state.hasCoupon}},created:function(){var t=this;this.getCart(),this.$bus.$on("regetCart",(function(){console.log("regetCart"),t.getCart()}))},methods:{getCart:function(){this.$store.dispatch("getCart")},removeCart:function(t){this.$store.dispatch("removeCart",t)},createOrder:function(){var t=this,e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("ying","/order");t.$store.dispatch("updateLoading",!0);var s=t.form;t.$validator.validate().then((function(a){a&&t.axios.post(e,{data:s}).then((function(e){console.log("訂單已建立",e),t.$store.dispatch("updateLoading",!1),e.data.success&&t.$router.push("/Payment/".concat(e.data.orderId))}))}))},addCouponCode:function(){var t=this,e=this,s="".concat("https://vue-course-api.herokuapp.com","/api/").concat("ying","/coupon");e.$store.dispatch("updateLoading",!0);var a={code:e.coupon_code};this.$http.post(s,{data:a}).then((function(s){console.log(s),e.getCart(),e.$store.dispatch("updateLoading",!1),t.$bus.$emit("couponRegetCart")}))},backtoHome:function(){this.$router.push("/")}}}),o=i,l=s("2877"),n=Object(l["a"])(o,a,r,!1,null,null,null);e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0f00bc.21d491d7.js.map