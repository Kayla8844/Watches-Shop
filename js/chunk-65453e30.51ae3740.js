(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65453e30"],{7851:function(t,a,s){"use strict";var e=s("ee9a"),i=s.n(e);i.a},ac6a:function(t,a,s){for(var e=s("cadf"),i=s("0d58"),n=s("2aba"),r=s("7726"),c=s("32e9"),o=s("84f2"),l=s("2b4c"),u=l("iterator"),d=l("toStringTag"),f=o.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(v),C=0;C<h.length;C++){var m,p=h[C],g=v[p],_=r[p],b=_&&_.prototype;if(b&&(b[u]||c(b,u,f),b[d]||c(b,d,p),o[p]=f,g))for(m in e)b[m]||n(b,m,e[m],!0)}},bb51:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"home"},[s("Navbar"),s("Alert"),s("keep-alive",[t.$route.meta.keepAlive?s("router-view"):t._e()],1),t.$route.meta.keepAlive?t._e():s("router-view"),s("Footer")],1)},i=[],n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("nav",{staticClass:"navbar custom_navbar"},[s("div",{staticClass:"navbar-top navbar-icon-all"},[s("div",{staticClass:"nav_brand_all"},[s("div",[s("router-link",{staticClass:"nav_brand",attrs:{to:"/"}},[t._v("WHACHES SHOP")])],1),s("div",{staticClass:"nav_mob"},[s("router-link",{staticClass:"nav-title",attrs:{to:"/"}},[t._v("首頁 | 產品列表")])],1)]),s("div",{staticClass:"nav_title_all"},[s("div",{staticClass:"nav_pc"},[s("router-link",{staticClass:"nav-title",attrs:{to:"/"}},[t._v("首頁 | 產品列表")])],1),s("button",{staticClass:"btn btn-sm btn-cart",attrs:{"data-toggle":"dropdown","data-flip":"false"},on:{click:t.toggleCartbox}},[s("i",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true"}}),s("span",{staticClass:"badge badge-pill badge-danger"},[t._v(t._s(t.cart.carts.length))]),s("span",{staticClass:"sr-only"},[t._v("unread messages")])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"cart_box p-3"},[s("div",{staticClass:"cart_head",class:{"text-success":"hasCoupon"}},[s("h6",[t._v("已選擇商品")]),s("p",{staticClass:"final_total"},[t.hasCoupon?s("span",{staticClass:"text-success"},[t._v("折扣後 ")]):s("span",[t._v("總計 ")]),t.hasCoupon?s("span",{staticClass:"text-success"},[t._v(t._s(t._f("currency")(t.cart.final_total)))]):s("span",[t._v(t._s(t._f("currency")(t.cart.final_total)))])])]),s("div",{staticClass:"cart_menu_all mb-3"},[t.cart.carts.length?s("table",{staticClass:"table table-sm"},[s("tbody",t._l(t.cart.carts,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle text-center"},[s("button",{staticClass:"trash_btn",on:{click:function(s){return s.preventDefault(),t.removeCart(a.id)}}},[t.status.delitem==a.id?s("i",{staticClass:"fas fa-spinner fa-spin"}):s("i",{staticClass:"fas fa-trash-alt"})])]),s("td",{staticClass:"align-middle"},[s("img",{staticClass:"pd_img",attrs:{src:a.product.imageUrl,alt:""}})]),s("td",{staticClass:"align-middle text-center"},[t._v(t._s(a.product.title))]),s("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),t.hasCoupon?s("td",{staticClass:"align-middle text-right text-success"},[t._v(t._s(t._f("currency")(a.final_total)))]):s("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.total)))])])})),0)]):t._e()]),s("router-link",{staticClass:"goto_check_link",attrs:{to:"/customer_checkout"}},[s("button",{staticClass:"btn btn-block btn_cart",on:{click:t.closeCartbox}},[s("i",{staticClass:"fa fa-cart-plus",attrs:{"aria-hidden":"true"}}),t._v(" 結帳去\n\t\t\t")])])],1)])},r=[],c=(s("ac6a"),s("cadf"),s("551c"),s("f751"),s("097d"),s("1157"),{name:"App",data:function(){return{cart:{carts:[]},isLoading:!1,status:{delitem:""},isShow:!1,hasCoupon:!1}},created:function(){var t=this;this.getCart(),this.$bus.$on("regetCart",(function(){console.log("emit on"),t.getCart()})),this.$bus.$on("emptyCart",(function(){console.log("emptyCart"),t.removeAllCart()})),this.$bus.$on("couponRegetCart",(function(){console.log("on couponRegetCart"),t.getCart()}))},methods:{getCart:function(){var t=this;t.isLoading=!0;var a="".concat("https://vue-course-api.herokuapp.com","/api/").concat("ying","/cart");this.$http.get(a).then((function(a){a.data.data.carts&&(t.cart=a.data.data),t.isLoading=!1,console.log("取得購物車",a.data.data);var s=a.data.data.carts;s.forEach((function(a,s,e){a.coupon&&(t.hasCoupon=!0,console.log(t.hasCoupon))}))}))},removeCart:function(t){var a=this,s=this,e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("ying","/cart/").concat(t);s.status.delitem=t,this.$http.delete(e).then((function(t){s.status.delitem="",s.getCart(),a.$bus.$emit("regetCart"),console.log("刪除購物車項目",t)}))},removeAllCart:function(){this.cart.carts=[],this.$bus.$emit("removeAllCart"),this.getCart()},toggleCartbox:function(){this.isShow=!this.isShow},closeCartbox:function(){this.isShow=!1}}}),o=c,l=s("2877"),u=Object(l["a"])(o,n,r,!1,null,null,null),d=u.exports,f=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"alert_all"},[s("div",{staticClass:"overlay"}),s("div",{staticClass:"alert_msg_all"},t._l(t.messages,(function(a,e){return s("div",{key:e,staticClass:"alert_msg d-flex justify-content-between",class:"alert-"+a.status},[s("p",[t._v(t._s(a.message))]),s("button",{staticClass:"btn_close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return t.removeMessage(e)}}},[s("span",{staticClass:"close_txt",attrs:{"aria-hidden":"true"}},[t._v("×")])])])})),0)])},v=[],h={name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,a){var s=Math.floor(new Date/1e3);this.messages.push({message:t,status:a,timestamp:s}),document.querySelector(".overlay").style.display="block",this.removeMessageWithTiming(s)},removeMessage:function(t){this.messages.splice(t,1),document.querySelector(".overlay").style.display="none"},removeMessageWithTiming:function(t){var a=this;setTimeout((function(){a.messages.forEach((function(s,e){s.timestamp===t&&a.messages.splice(e,1)})),document.querySelector(".overlay").style.display="none"}),2e3)}},created:function(){var t=this;t.$bus.$on("messsage:push",(function(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(a,s)}))}},C=h,m=(s("7851"),Object(l["a"])(C,f,v,!1,null,"76b85b03",null)),p=m.exports,g=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("footer",[s("div",{staticClass:"container footer_content"},[s("div",{staticClass:"d-flex justify-content-center icon_row"},[s("a",{staticClass:"contact_icon",attrs:{href:"#"}},[s("i",{staticClass:"fab fa-facebook-f"})]),s("a",{staticClass:"contact_icon",attrs:{href:"#"}},[s("i",{staticClass:"fab fa-github"})]),s("a",{staticClass:"contact_icon",attrs:{href:"#"}},[s("i",{staticClass:"fab fa-instagram"})]),s("a",{staticClass:"contact_icon",attrs:{href:"#"}},[s("i",{staticClass:"far fa-envelope"})])]),s("p",{staticClass:"text-center copyright"},[t._v("\n\t\t\t© Copright 2019 Ying-Hsuan-Lee\n\t\t\t"),s("br"),t._v("\n\t\t\t個人練習用，無商業用途\n\t\t")])])])}],b={},y=Object(l["a"])(b,g,_,!1,null,null,null),S=y.exports,L={name:"home",components:{Navbar:d,Alert:p,Footer:S}},k=L,x=Object(l["a"])(k,e,i,!1,null,null,null);a["default"]=x.exports},ee9a:function(t,a,s){}}]);
//# sourceMappingURL=chunk-65453e30.51ae3740.js.map