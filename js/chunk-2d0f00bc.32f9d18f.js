(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f00bc"],{"9b63":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container customer_checkout"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"mt-3"},[a("button",{staticClass:"btn btn_backto_pd",on:{click:t.backtoHome}},[t._v("<  回到產品列表")])]),t._m(0),a("div",{staticClass:"check_ct_all container mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"cart_list_all col-lg-5 order-lg-2"},[a("div",{staticClass:"cart_head_all"},[a("div",{staticClass:"cart_head d-flex justify-content-between align-items-center mb-1"},[a("h5",{staticClass:"cart_title"},[t._v("購物清單")]),t.cart.carts?a("div",{staticClass:"cart_length"},[a("p",{staticClass:"cart_length_txt"},[t._v(t._s(t.cart.carts.length))])]):t._e()])]),t.cart.carts?a("table",{staticClass:"table"},[a("tbody",[t._l(t.cart.carts,function(e){return a("tr",{key:e.id,staticClass:"total_row"},[a("td",{staticClass:"align-middle text-left"},[a("button",{staticClass:"trash_btn",on:{click:function(a){return a.preventDefault(),t.removeCart(e.id)}}},[t.status.delitem==e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):a("i",{staticClass:"fas fa-trash-alt"})]),a("img",{staticClass:"pd_img pd_img_mob mt-2",attrs:{src:e.product.imageUrl,alt:""}})]),a("td",{staticClass:"align-middle"},[a("img",{staticClass:"pd_img pd_img_lg",attrs:{src:e.product.imageUrl,alt:""}})]),a("td",{staticClass:"align-middle text-left"},[e.coupon?a("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e(),t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.product.title)+"\n\t\t\t\t\t\t\t\t")]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(e.total)))])])}),a("tr",{staticClass:"total_row"},[a("td",{staticClass:"total text-right",attrs:{colspan:"5"}},[a("p",{staticClass:"total_txt"},[t._v("總計 "+t._s(t._f("currency")(t.cart.total)))])])]),t.cart.total!=t.cart.final_total?a("tr",{staticClass:"total_row"},[a("td",{staticClass:"total text-right",attrs:{colspan:"5"}},[a("p",{staticClass:"text-success"},[t._v("折扣後 "+t._s(t._f("currency")(t.cart.final_total)))])])]):t._e()],2)]):t._e(),a("div",{staticClass:"coupon_all"},[a("h6",{staticClass:"text-success"},[t._v('輸入優惠碼 "0080"，可享8折優惠')]),a("div",{staticClass:"coupon_input_all mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"coupon_input",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addCouponCode(e)},input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),a("button",{staticClass:"btn_add_coupon",attrs:{type:"button"},on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addCouponCode(e)}}},[t._v("套用優惠碼")])])])]),a("div",{staticClass:"user_form text-left col-lg-7"},[a("h5",{staticClass:"mb-3"},[t._v("訂單資訊")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("tel")},attrs:{type:"tel",id:"usertel",name:"tel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("tel")?a("span",{staticClass:"text-danger"},[t._v("電話必須輸入")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("address")},attrs:{type:"address",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("留言")]),a("br"),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._m(1)])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"row justify-content-center mt-4"},[a("div",{staticClass:"step_all col-md-8"},[a("div",{staticClass:"step_list text-center active"},[a("div",{staticClass:"step"},[a("div",{staticClass:"step_txt active"},[t._v("1")])]),a("p",{staticClass:"step_ct"},[t._v("輸入資料")]),a("div",{staticClass:"bg_line_all"})]),a("div",{staticClass:"step_list text-center"},[a("div",{staticClass:"step"},[a("div",{staticClass:"step_txt step_txt2"},[t._v("2")])]),a("p",{staticClass:"step_ct"},[t._v("金流付款")])]),a("div",{staticClass:"step_list text-center"},[a("div",{staticClass:"step"},[a("div",{staticClass:"step_txt step_txt3"},[t._v("3")])]),a("p",{staticClass:"step_ct"},[t._v("完成")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger btn_form_output"},[t._v("送出訂單")])])}],i=(a("1157"),{data:function(){return{cart:{},status:{delitem:""},coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1}},created:function(){this.getCart()},methods:{getCart:function(){var t=this,e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("ying","/cart");t.isLoading=!0,this.$http.get(e).then(function(e){console.log(e),t.cart=e.data.data,t.isLoading=!1})},removeCart:function(t){var e=this,a="".concat("https://vue-course-api.herokuapp.com","/api/").concat("ying","/cart/").concat(t);e.status.delitem=t,this.$http.delete(a).then(function(t){e.status.delitem="",e.getCart(),console.log("刪除購物車項目",t),e.$bus.$emit("regetCart")})},createOrder:function(){var t=this,e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("ying","/order"),a=t.form;t.$validator.validate().then(function(s){s&&t.axios.post(e,{data:a}).then(function(e){console.log("訂單已建立",e),e.data.success?t.$router.push("/Payment/".concat(e.data.orderId)):(t.$bus.$emit("messsage:push",e.data.message,"danger"),console.log("欄位不完整"))})})},addCouponCode:function(){var t=this,e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("ying","/coupon");t.isLoading=!0;var a={code:t.coupon_code};this.$http.post(e,{data:a}).then(function(e){console.log(e),t.getCart(),t.isLoading=!1})},backtoHome:function(){this.$router.push("/")}}}),o=i,l=a("2877"),n=Object(l["a"])(o,s,r,!1,null,null,null);e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0f00bc.32f9d18f.js.map